<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>Creating assets in Blender3D</title><link rel="stylesheet" href="./twemoji-awesome.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"><link rel="stylesheet" href="/home/travis/build/wmiksch/JMEWikiGerman/build/asciidoc/html5/jme3/external/twemoji-awesome.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/wmiksch/JMEWikiGerman/edit/master/src/docs/asciidoc/jme3/external/blender.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/wmiksch/JMEWikiGerman/new/master/src/docs/asciidoc/jme3/external/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>Creating assets in Blender3D</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Inhaltsverzeichnis</div><ul class="sectlevel1"><li><a href="#asset-management">Asset Management</a></li><li><a href="#creating-models">Creating Models</a><ul class="sectlevel2"><li><a href="#uv-mapped-textures">UV Mapped Textures</a></li><li><a href="#animations">Animations</a></li><li><a href="#model-checklist">Model Checklist</a></li></ul></li><li><a href="#action-baking">Action Baking</a></li><li><a href="#normal-map-baking">Normal Map baking</a><ul class="sectlevel2"><li><a href="#blender-modeling-lowpoly-highpoly">Blender Modeling LowPoly &amp; HighPoly</a></li><li><a href="#fixing-the-normal-colors-in-blender">Fixing the Normal colors in Blender</a></li></ul></li><li><a href="#lightmap-baking">LightMap baking</a><ul class="sectlevel2"><li><a href="#blender-modeling-texturing">Blender modeling + texturing</a></li></ul></li><li><a href="#importing-the-model-in-the-sdk-and-creating-the-appropriate-material">Importing the model in the SDK and creating the appropriate material</a></li><li><a href="#modelling-racing-tracks-and-cars">Modelling racing tracks and cars</a></li><li><a href="#optimizing-models-for-3d-games">Optimizing Models for 3D games</a></li><li><a href="#skybox-baking">SkyBox baking</a></li><li><a href="#further-reading">Further reading</a></li></ul></div></div><div id="content"><div id="preamble"><div class="sectionbody"><div class="paragraph"><p>This section discusses how to create and import models from Blender3D (2.78+, see bottom of page for Blender 2.49 and before) to jME3. Furthermore, it explains how you can create various typical game-related assets like &#8220;Normal&#8221; maps of high-poly models and &#8220;Baked Lighting&#8221; maps.</p></div></div></div>
<div class="sect1"><h2 id="asset-management">Asset Management</h2><div class="sectionbody"><div class="paragraph"><p>For the managing of assets in general, be sure to read the <a href="../../jme3/intermediate/multi-media_asset_pipeline.html">Asset Pipeline Documentation</a>. It contains vital information on how to manage your asset files.</p></div></div></div>
<div class="sect2"><h3 id="creating-models">Creating Models</h3><div class="paragraph"><p>Game-compatible models are models that basically only consist of a mesh and UV-mapped textures, in some cases animations. All other material parameters or effects (like particles, etc.) cannot be expected to be transferred properly and probably would not translate to live rendering very well anyway.</p></div>
<div class="sect2"><h3 id="uv-mapped-textures">UV Mapped Textures</h3><div class="paragraph"><p>To successfully import a texture, the texture <strong>has to</strong> be UV-mapped to the model. Heres how to assign &#8220;Diffuse&#8221;, &#8220;Normal&#8221; and &#8220;Specular&#8221; maps:</p></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/blender-material-4.png" alt="blender-material-4.png" width="" height=""></div></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/blender-material-3.png" alt="blender-material-3.png" width="" height=""></div></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/blender-material-2.png" alt="blender-material-2.png" width="" height=""></div></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/blender-material-1.png" alt="blender-material-1.png" width="" height=""></div></div>
<div class="paragraph"><p>It&#8217;s important to note that each used texture will create one separate geometry. So it&#8217;s best to either combine the UV maps or use a pre-made atlas with different texture types from the start and then map the uv coords of the models to the atlas instead of painting on the texture. This works best for large models like cities and space ships.</p></div></div>
<div class="sect2"><h3 id="animations">Animations</h3><div class="paragraph"><p>Animations for jME3 have to be bone animations, mesh deformation or other forms of animation are not supported.</p></div>
<div class="paragraph"><p>To create an animation from scratch do the following:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>Create the model.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Make sure your models location, rotation and scale is applied and zero / one (see &#8220;Model Checklist&#8221; below).</p><div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content">Did you know? You can make any model from a box by only using extrusion, this creates very clean meshes.</td></tr></table></div></li></ol></div></li><li><p>Create the armature bones, don&#8217;t forget to have one root bone!</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Start by placing the cursor at zero.</p></li><li><p>Go to the <code><span class="menuseq"><span class="menu">Add</span>&#160;&#9656; <span class="submenu">Armature</span>&#160;&#9656; <span class="menuitem">Single Bone</span></span></code> menu and create the root bone.</p><div class="imageblock"><div class="content"><img src="../../jme3/external/blender-add-bone.png" alt="blender-add-bone.png" width="" height=""></div></div></li><li><p>Select the bone and go to edit mode (press <kbd>Tab</kbd>).</p></li><li><p>Select the root bone end and press <kbd>E</kbd> to extrude the bone, then start rigging your model this way.</p><div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content">Make sure your armature&#8217;s location, rotation and scale is applied (see &#8220;Model Checklist&#8221; below) before continuing.</td></tr></table></div></li></ol></div></li><li><p>Make the armature the parent of the model.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Make sure you are back in object mode (press <kbd>Tab</kbd> again).</p></li><li><p>First select the model object then select the armature object with <kbd>Shift</kbd> pressed, then press <kbd>Ctrl</kbd> + <kbd>P</kbd>.</p></li><li><p>When you do this, you can select how the bone groups will be mapped to the model vertices initially. Select <b class="button">With Automatic Weights</b>.</p><div class="admonitionblock note"><table><tr><td class="icon"><i class="fa icon-note" title="Note"></i></td><td class="content"><div class="paragraph"><p>When you parent your mesh to the armature, Blender automatically adds the <code>Armature</code> modifier to the mesh.</p></div>
<div class="paragraph"><p><span class="image"><img src="../../jme3/external/blender-make-armature.png" alt="blender-make-armature.png" width="" height=""></span></p></div></td></tr></table></div>
<div class="paragraph"><p>Voila, your model should move when you move the bones in pose mode.</p></div></li></ol></div></li><li><p>From the <code>Info</code> header, press the <b class="button">Choose Screen Layout</b> button and select the <code>Animation</code> layout.</p></li><li><p>In the <code>Dope Sheet Editor</code> window, press the <b class="button">Context</b> button and select <code>Action Editor</code>.</p><div class="imageblock"><div class="content"><img src="../../jme3/external/blender-action-editor.png" alt="blender-action-editor.png" width="" height=""></div></div></li><li><p>Add an action by pressing the <b class="button">+</b> button.</p></li><li><p>Set the &#8220;Rotation Mode&#8221; of the bone to <code>Quaternion</code> or switch later from your &#8220;Rotation Mode&#8221; to <code>Quaternion</code> and make a <code>Keyframe</code>.</p><div class="imageblock"><div class="content"><img src="../../jme3/external/blender-switch-rotationmode.png" alt="blender-switch-rotationmode.png" width="" height=""></div></div></li><li><p>Create the <code>Keyframe</code>s (select the model armature and press <kbd>I</kbd>) along the timeline.</p><div class="openblock"><div class="content"><div class="imageblock"><div class="content"><img src="../../jme3/external/blender-add-keyframes.png" alt="blender-add-keyframes.png" width="" height=""></div></div>
<div class="paragraph"><p>Each action will be an animation available via the animation control in jME after the import.</p></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content">Press the <b class="button">F</b> button next to the action so it will be saved even if there&#8217;s no references. The animation would else be deleted if its not the active animation on the armature and the file is saved.</td></tr></table></div></div></div></li></ol></div></div>
<div class="sect2"><h3 id="model-checklist">Model Checklist</h3><div class="paragraph"><p>Sometimes you do not create the model yourself and often models from the web are not really made for OpenGL live rendering or not completely compatible with the bone system in jME.</p></div>
<div class="paragraph"><p>To export an animated model in Blender make sure the following conditions are met:</p></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content">This checklist is interactive for your convenience.</td></tr></table></div>
<div class="ulist checklist"><ul class="checklist"><li><p><input type="checkbox" data-item-complete="0"> The animation has to be a <strong>bone animation</strong>.</p></li><li><p><input type="checkbox" data-item-complete="0"> Apply Location, Rotation and Scale to the mesh in Blender: In the <code>3D Viewport</code> in Blender, select the mesh in <code>Object Mode</code>, from the <code>3D View Editor</code> header, click <code><span class="menuseq"><span class="menu">Object</span>&#160;&#9656; <span class="submenu">Apply</span>&#160;&#9656; <span class="menuitem">Location / Rotation / Scale</span></span></code>.</p><div class="imageblock"><div class="content"><img src="../../jme3/external/blender_apply_mesh.png" alt="blender_apply_mesh.png" width="300" height=""></div></div></li><li><p><input type="checkbox" data-item-complete="0"> Apply Location, Rotation and Scale to the armature in Blender: In the <code>3D Viewport</code> in Blender, select the armature in <code>Object Mode</code>, from the <code>3D View Editor</code> header, click <code><span class="menuseq"><span class="menu">Object</span>&#160;&#9656; <span class="submenu">Apply</span>&#160;&#9656; <span class="menuitem">Location / Rotation / Scale</span></span></code>.</p><div class="imageblock"><div class="content"><img src="../../jme3/external/blender_apply_bones.png" alt="blender_apply_bones.png" width="300" height=""></div></div></li><li><p><input type="checkbox" data-item-complete="0"> Set the mesh’s origin point in the bottom of the mesh (see the image below).</p></li><li><p><input type="checkbox" data-item-complete="0"> Set the armature’s origin point in the bottom of the armature (see the image below).</p></li><li><p><input type="checkbox" data-item-complete="0"> Armature’s origin point and mesh’s origin point must be in the same location (see the image below).</p></li><li><p><input type="checkbox" data-item-complete="0"> Use a root bone located in the armature’s origin. This root bone must be in vertical position (see the image below) and it is the root bone of the armature. If you rotate the root bone, the entire armature might be rotated when you import the model into jMonkey.</p></li><li><p><input type="checkbox" data-item-complete="0"> Uncheck:</p><div class="ulist checklist"><ul class="checklist"><li><p><i class="fa fa-square-o"></i> Bone Envelopes</p><div class="openblock"><div class="content"><div class="paragraph"><p>on the Armature modifier for the mesh (see the image below).</p></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/blender_envelopes.png" alt="blender_envelopes.png" width="300" height=""></div></div></div></div></li></ul></div></li><li><p><input type="checkbox" data-item-complete="0"> Under the armature data tab, make sure the bone type is <code>Octahedral</code> (see image below).</p><div class="imageblock"><div class="content"><img src="../../jme3/external/blender_rootbone2.png" alt="blender_rootbone2.png" width="" height=""></div></div></li></ul></div>
<div class="paragraph"><p>You can use <code>SkeletonDebugger</code> to show the skeleton on your game in order to check if the mesh and the skeleton are loaded correctly:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">final</span> Material soldier2Mat = assetManager.loadMaterial(<span class="string"><span class="delimiter">&quot;</span><span class="content">Materials/soldier2/soldier2.j3m</span><span class="delimiter">&quot;</span></span>);
<span class="directive">final</span> Spatial soldier2 = assetManager.loadModel(<span class="string"><span class="delimiter">&quot;</span><span class="content">Models/soldier2/soldier2.j3o</span><span class="delimiter">&quot;</span></span>);
TangentBinormalGenerator.generate(soldier2);
soldier2.setMaterial(soldier2Mat);

<span class="directive">final</span> Node soldier2Node = <span class="keyword">new</span> Node(<span class="string"><span class="delimiter">&quot;</span><span class="content">Soldier2 Node</span><span class="delimiter">&quot;</span></span>);

soldier2Node.attachChild(soldier2);
rootNode.attachChild(soldier2Node);

<span class="directive">final</span> AnimControl animControl = soldier2.getControl(AnimControl.class);
animControl.addListener(<span class="local-variable">this</span>);
<span class="directive">final</span> AnimChannel animChannel = animControl.createChannel();

<span class="directive">final</span> SkeletonDebugger skeletonDebug = <span class="keyword">new</span> SkeletonDebugger(<span class="string"><span class="delimiter">&quot;</span><span class="content">skeleton</span><span class="delimiter">&quot;</span></span>, animControl.getSkeleton());
<span class="directive">final</span> Material mat = <span class="keyword">new</span> Material(assetManager, <span class="string"><span class="delimiter">&quot;</span><span class="content">Common/MatDefs/Misc/Unshaded.j3md</span><span class="delimiter">&quot;</span></span>);
mat.setColor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Color</span><span class="delimiter">&quot;</span></span>, ColorRGBA.Green);
mat.getAdditionalRenderState().setDepthTest(<span class="predefined-constant">false</span>);
skeletonDebug.setMaterial(mat);
soldier2Node.attachChild(skeletonDebug);</code></pre></div></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/blender_finished.png" alt="blender_finished.png" width="500" height=""></div></div>
<div class="paragraph"><p>Also check out these videos and resources:</p></div>
<div class="ulist"><ul><li><p><a href="https://hub.jmonkeyengine.org/t/importing-animations-from-blender-2-62-using-ogre-xml-things-to-check-if-you-are-getting-problems/22234">Forum: How to import animated models from Blender 2.6 correctly</a> (<a href="https://www.youtube.com/watch?v=QiLCs4AKh28">Video</a>)</p></li><li><p><a href="http://www.youtube.com/watch?v=NdjC9sCRV0s">Video tutorial for animated models from Blender 2.6</a></p></li><li><p><a href="https://docs.google.com/fileview?id=0B9hhZie2D-fENDBlZDU5MzgtNzlkYi00YmQzLTliNTQtNzZhYTJhYjEzNWNk&amp;hl=en">Exporting OgreXML scenes from Blender 2.49 to jME</a></p></li></ul></div></div></div>
<div class="sect1"><h2 id="action-baking">Action Baking</h2><div class="sectionbody"><div class="paragraph"><p>There are many 3D model <a href="../../jme3/features.html#supported-external-file-types">Supported External File Types</a> for jMonkeyEngine. Some of them bake your actions automatically on export, others don&#8217;t. Baking is a destructive process so it is recommended that you test the animation in-game first. If your animations are all messed up, try baking them or use a different exporter.</p></div>
<div class="paragraph"><p>If you find yourself in need of baking, the process is as follows.</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>From the Blender <code>Info</code> header, select <code><span class="menuseq"><span class="menu">File</span>&#160;&#9656; <span class="menuitem">Save Copy</span></span></code>.</p></li><li><p>Save the file somewhere other than the current folder. This will save you the effort of re-creating the animation file if you need it at some other time.</p></li><li><p>In the <code>Info</code> header, change the <code>Default</code> screen layout to <code>Animation</code>.</p></li><li><p>In the <code>Dope Sheet Editor</code>, change the <code>Dope Sheet</code> mode/context to <code>Action Editor</code>.</p></li><li><p>Click the <b class="button">Action to be linked</b> button and select your action.</p></li><li><p>In the <code>3d Viewport</code> header, select the armature.</p><div class="ulist"><ul><li><p>Depending on the mode selected choose:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Object Mode: <code><span class="menuseq"><span class="menu">Object</span>&#160;&#9656; <span class="submenu">Animation</span>&#160;&#9656; <span class="menuitem">Bake Action</span></span></code>.</p></li><li><p>Pose Mode: <code><span class="menuseq"><span class="menu">Pose</span>&#160;&#9656; <span class="submenu">Animation</span>&#160;&#9656; <span class="menuitem">Bake Action</span></span></code>.</p></li></ol></div></li></ul></div></li><li><p>In the <code>Bake Action</code> dialog, deselect and set the settings as follows:</p><div class="dlist"><dl><dt class="hdlist1">Bake Action</dt><dd><div class="ulist checklist"><ul class="checklist"><li><p><i class="fa fa-square-o"></i> Selected Only</p></li><li><p><i class="fa fa-check-square-o"></i> Visual Keying</p></li><li><p><i class="fa fa-check-square-o"></i> Clear Constraints</p></li><li><p><i class="fa fa-square-o"></i> Clear Parents</p></li><li><p><i class="fa fa-square-o"></i> Overwrite Current</p></li><li><p>Bake Data = Pose</p></li></ul></div></dd></dl></div></li><li><p>When ready click <b class="button">OK</b>.</p></li><li><p>The <code>Linked Action</code> in the <code>Dope Sheet Editor</code> will change to the newly baked action and is named <code>Action</code>. Rename this to the name of the imported animation.</p></li><li><p>Select the <b class="button">F</b> button to save the action.</p></li><li><p>Save your file.</p></li><li><p>Clear the old action from the <code>Linked Action</code> buffer. See <a href="../../jme3/external/blender/blender_buffer_clearing.html">Blender Buffer Clearing</a> for more information.</p></li></ol></div></div></div>
<div class="sect2"><h3 id="normal-map-baking">Normal Map baking</h3><div class="paragraph"><p>Models for live rendering should have a low polygon count. To increase the perceived detail of a model, Normal maps are commonly used in games. This tutorial will show how to create a Normal map from a &#8220;HighPoly&#8221; version of your model that you can apply to a &#8220;LowPoly&#8221; version of the model in your game.</p></div>
<div class="sect2"><h3 id="blender-modeling-lowpoly-highpoly">Blender Modeling LowPoly &amp; HighPoly</h3><div class="paragraph"><div class="title">Method 1</div>
<p>If you use the <code>Multiresolution</code> modifier you only need one object. Let&#8217;s look at this example, the Blender object Monkey, with an applied <code>Triangulate</code> modifier:</p></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/monkey.png" alt="monkey.png" width="50%" height=""></div></div>
<div class="olist arabic"><ol class="arabic"><li><p>Add a &#8220;Monkey&#8221; object by selecting the <b class="button">Monkey</b> button located on the &#8220;Create Tab&#8221;.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>While in <code>Object Mode</code>, in the <code>Properties</code> panel under the <code>Modifiers</code> tab, add a <code>Triangulate</code> modifier and apply it:</p></li><li><p>While in <code>Object Mode</code>, in the <code>Properties</code> panel under the <code>Modifiers</code> tab, add a <code>Multiresolution</code> modifier:</p><div class="openblock"><div class="content"><div class="imageblock"><div class="content"><img src="../../jme3/external/3.1.gif" alt="3.1.gif" width="300" height=""></div></div>
<div class="paragraph"><p>There are two types of modifiers: Catmull-Clark and Simple.</p></div>
<div class="ulist"><ul><li><p>Simple is better for things like walls or floors.</p></li><li><p>Catmull-Clark is better for objects like spheres.</p></li></ul></div>
<div class="paragraph"><p>When using Catmull-Clark with a higher &#8220;subdivide&#8221; value (more than 3), it&#8217;s good to have the &#8220;Preview&#8221; value above 0 and less than the subdivide level. This is because Catmull-Clark smooths the vertices, so the Normal map is not so precise.</p></div>
<div class="paragraph"><p>Regardless of the choice, the larger the difference is between &#8220;Render&#8221; and &#8220;Preview&#8221;, the deeper the detail is on the Normal map.</p></div>
<div class="ulist"><ul><li><p>Here is an example of <code>Preview 1</code>, it&#8217;s more smooth than the original mesh:</p></li></ul></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/monkeyprev1.png" alt="monkkeyprev1.png" width="50%" height=""></div></div></div></div></li></ol></div></li><li><p>From the <code>File</code> header at the top of the 3d View, click the <b class="button">Choose Screen layout</b> button and select &#8220;UV Editing&#8221;.</p></li><li><p>In the <code>3d View</code>, select the Monkey and <kbd>Tab</kbd> into &#8220;Edit Mode&#8221;.</p></li><li><p>If the Monkey vertices are not already highlighted, press the <kbd>A</kbd> key until all vertices are highlighted.</p></li><li><p>From the <code>3d View</code> header, select <code><span class="menuseq"><span class="menu">Mesh</span>&#160;&#9656; <span class="submenu">UV Unwrap</span>&#160;&#9656; <span class="menuitem">Smart UV Project</span></span></code>.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Click the <b class="button">Island Margin</b> button once to advance the value to .03.</p></li><li><p>Click <b class="button">OK</b> when ready.</p></li></ol></div></li><li><p>In the <code>UV Image Editor</code>, click the <b class="button">New</b>  button.</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Change the name to something like &#8220;monkey_bump&#8221;.</p></li><li><p>Optionally, change the <code>Generated Type</code> to &#8220;UV Grid&#8221;.</p></li><li><p>Uncheck:</p><div class="ulist checklist"><ul class="checklist"><li><p><i class="fa fa-square-o"></i> 32 Bit</p></li></ul></div></li><li><p>Click <b class="button">OK</b> when ready.</p></li></ol></div></li><li><p>From the <code>File</code> header at the top of the <code>UV Image Editor</code>, click the <b class="button">Choose Screen layout</b> button and select &#8220;Default&#8221;.</p></li><li><p>With your mouse inside the <code>3D View</code>, tab into <code>Object Mode</code>.</p></li><li><p>Now go into the <code>Render</code> tab, and bake a <code>Normal</code> map using the same configuration as here:</p><div class="openblock"><div class="content"><div class="imageblock"><div class="content"><img src="../../jme3/external/4.gif" alt="4.gif" width="300" height=""></div></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content">Remember! The actual preview affects the baking output and mesh export!</td></tr></table></div></div></div></li><li><p>Navigate back to the <code>UV Editing</code> layout and save your image by selecting <code><span class="menuseq"><span class="menu">Image*</span>&#160;&#9656; <span class="menuitem">Save As</span></span></code> from the <code>UV Image Editor</code> header.</p></li></ol></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content">The asterisk <kbd>*</kbd> next to the <code>Image</code> menu item means the image has not yet been saved.</td></tr></table></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/monkey_bump.png" alt="monkey_bump.png" width="50%" height=""></div>
<div class="title">Figure 1. Normal map from Method 1</div></div>
<div class="paragraph"><p>This second method produces the best results by far:</p></div>
<div class="olist arabic"><div class="title">Method 2</div>
<ol class="arabic"><li><p>Follow the steps for &#8220;Method 1&#8221; but before baking, uncheck:</p><div class="ulist checklist"><ul class="checklist"><li><p><i class="fa fa-square-o"></i> Bake from Multires</p></li></ul></div></li><li><p>Make a copy of your mesh (<kbd>SHIFT</kbd>+<kbd>D</kbd>).</p></li><li><p>Remove the Multires modifier from the copied model.</p></li><li><p>Remove any materials from the copied model.</p></li><li><p>Remove the armature modifier from the copied model.</p></li><li><p>Select the original (HighPoly) model.</p></li><li><p>Go into pose mode, clear any pose transformations.</p></li><li><p>The &#8220;HighPoly&#8221; and &#8220;LowPoly&#8221; models should be on top of each other now.</p></li><li><p>Select the original (HighPoly) model.</p></li><li><p>Hold <kbd>SHIFT</kbd> and select the copied (LowPoly) model.</p></li><li><p>In the <code>Properties</code> panel, in the <code>Render</code> tab:</p><div class="olist loweralpha"><ol class="loweralpha" type="a"><li><p>Bake Mode: <code>Normal</code></p></li><li><p>check:</p><div class="ulist checklist"><ul class="checklist"><li><p><i class="fa fa-check-square-o"></i> Selected to Active</p></li></ul></div></li><li><p>Use a reasonably high value for &#8220;Margin&#8221; (4+ pixels at least for 1024x1024 maps).</p></li></ol></div></li><li><p>Bake and don&#8217;t forget to save the Normal map image.</p></li></ol></div>
<div class="admonitionblock important"><table><tr><td class="icon"><i class="fa icon-important" title="Important"></i></td><td class="content"><div class="paragraph"><p>Keep in mind that when you duplicate the model, you are also duplicating its UV mapping. What this means is your "HiPoly" model and &#8220;LowPoly&#8221; model are both assigned to an image.</p></div>
<div class="paragraph"><p>If you ever see this error:</p></div>
<div class="paragraph"><p>"No objects or images found to bake to"</p></div>
<div class="paragraph"><p>You are either missing the image for the &#8220;LowPoly&#8221; model, or in the Outliner, the camera symbol (Restrict Render) is off (grayed out).</p></div></td></tr></table></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/monkey_bump2.png" alt="monkey_bump2.png" width="50%" height=""></div>
<div class="title">Figure 2. Normal map from Method 2</div></div></div>
<div class="sect2"><h3 id="fixing-the-normal-colors-in-blender">Fixing the Normal colors in Blender</h3><div class="paragraph"><p>There are two &#8220;standards&#8221; for Normal maps:</p></div>
<div class="ulist"><ul><li><p>DirectX</p></li><li><p>OpenGL</p></li></ul></div>
<div class="paragraph"><p>The difference between them is that the green channel is inverted. One would expect that JME supports the OpenGL way, but actually JME supports the DirectX way because it’s what Blender supports and the developers of JME thought it would be easier in the Blender to JME workflow.</p></div>
<div class="paragraph"><p>Because of this, you need to fix the colors to prepare the Normal map for using it with the JME Lighting Material. You should only have to invert the green channel, the red and blue channels should stay unchanged. The curve for the red and blue channels should go from bottom left to top right, the green from top left to bottom right.</p></div>
<div class="paragraph"><p>To do this after baking and saving the original Normal map image:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>In the &#8220;UV Editing&#8221; layout, from the &#8220;UV Image Editor&#8221; header select <code><span class="menuseq"><span class="menu">Image</span>&#160;&#9656; <span class="submenu">Invert</span>&#160;&#9656; <span class="menuitem">Invert Green Channel</span></span></code>.</p></li><li><p>Save the inverted image to a destination you want and use it with the JME Lighting Material and the &#8220;LowPoly&#8221; version of the model.</p></li></ol></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/monkey_bump2_invert.png" alt="monkey_bump2_invert.png" width="50%" height=""></div>
<div class="title">Figure 3. Normal map invert results (Method 2 example)</div></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="title">Inverting Tips</div><div class="paragraph"><p>If you build the engine from source, the master branch <a href="https://github.com/jMonkeyEngine/jmonkeyengine/blob/master/jme3-core/src/main/resources/Common/MatDefs/Light/PBRLighting.j3md#L39">PBR material</a> has a NormalType parameter that allows one to handle this in the shader instead of having to edit the Normal map.</p></div>
<div class="paragraph"><p>You can also use the SDK to invert the channel:</p></div>
<div class="olist arabic"><ol class="arabic"><li><p>In the SDK, <b class="button">RMB</b> select the image and choose &#8220;Edit Texture&#8221;.</p></li><li><p>In the window header, press the <b class="button">Filters</b> button and choose <code><span class="menuseq"><span class="menu">Invert</span>&#160;&#9656; <span class="menuitem">Green</span></span></code>.</p></li><li><p>When satisfied, save the change in the same format as the original image using <code><span class="menuseq"><span class="menu">File</span>&#160;&#9656; <span class="menuitem">Save</span></span></code>.</p></li></ol></div></td></tr></table></div>
<div class="paragraph"><p>This is what the final outcome of Normal map baking should produce for you. A &#8220;LowPoly&#8221; model that looks like it&#8217;s a &#8220;HighPoly&#8221; model.</p></div>
<div class="imageblock"><div class="content"><img src="../../jme3/external/monkey_final.gif" alt="monkey_final.gif" width="" height=""></div>
<div class="title">Figure 4. Final results (Method 2 example)</div></div></div></div>
<div class="sect2"><h3 id="lightmap-baking">LightMap baking</h3><div class="paragraph"><p>The goal of this tutorial is to explain briefly how to bake light map in blender with a separate set of texture coordinates and then export a model using this map in jME3.</p></div>
<div class="sect2"><h3 id="blender-modeling-texturing">Blender modeling + texturing</h3><div class="ulist"><ul><li><p>create a mesh in blender and unwrap it to create uvs</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/advanced/1.jpg" alt="1.jpg" width="600" height=""></span></p></li></ul></div></li><li><p>In the mesh tab you can see the sets of Uvs, it will create the first one.</p><div class="ulist"><ul><li><p>You can assign w/e texture on it, I used the built in checker of blender for the example.</p></li></ul></div></li><li><p>In this list, create a new one and click on the camera icon so that baking is made with this set. Name it LightUvMap.</p></li><li><p>In the 3D view in edit mode select all your mesh vertice and hit 'U'/LightMap pack then ok it will unfold the mesh for light map.</p></li><li><p>Create a new image, go to the render tab an all at the end check the &#8220;Bake&#8221; section and select shadows. Then click bake.</p></li><li><p>If all went ok it will create a light map like this.</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/advanced/2.jpg" alt="2.jpg" width="600" height=""></span></p></li></ul></div></li><li><p>Go to the material tab, create a new one for your model and go to the Texture Tab.</p></li><li><p>Create 2 textures one for the color map, and one for the light map.</p></li><li><p>In the Mapping section be sure to select coordinates : UV and select the good set of coordinates.</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/advanced/3.jpg" alt="3.jpg" width="600" height=""></span></p></li></ul></div></li><li><p>Then the light map</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/advanced/4.jpg" alt="4.jpg" width="600" height=""></span></p></li></ul></div></li></ul></div></div></div>
<div class="sect1"><h2 id="importing-the-model-in-the-sdk-and-creating-the-appropriate-material">Importing the model in the SDK and creating the appropriate material</h2><div class="sectionbody"><div class="paragraph"><p>Once this is done, export your model with one of the 3D model <a href="../../jme3/features.html#supported-external-file-types">Supported External File Types</a> and convert it into a <code>.j3o</code> with the SDK, or the JME <a href="https://javadoc.jmonkeyengine.org/v3.3.2-stable/com/jme3/export/binary/BinaryExporter.html">BinaryExporter</a>.</p></div>
<div class="ulist"><ul><li><p>Create material for it using the lighting definition.</p></li><li><p>Add the colorMap in the diffuse map slot and the lightMap in the light map slot.</p></li><li><p>Make sure you check &#8220;SeparateTexCoords&#8221;</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/advanced/5.jpg" alt="5.jpg" width="600" height=""></span></p></li></ul></div></li><li><p>It should roughly result in something like that :</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/advanced/6.jpg" alt="6.jpg" width="600" height=""></span></p></li></ul></div></li></ul></div></div></div>
<div class="sect1"><h2 id="modelling-racing-tracks-and-cars">Modelling racing tracks and cars</h2><div class="sectionbody"><div class="paragraph"><p>Follow the link below to a pdf tutorial by rhymez where I guide you to modelling a car and importing it to the jMonkeyEngine correctly and edit it in the vehicle editor.Plus how to model a simple racing track.
<a href="http://www.indiedb.com/games/street-rally-3d/downloads/modelling-in-blender-to-the-jmonkeyengine">http://www.indiedb.com/games/street-rally-3d/downloads/modelling-in-blender-to-the-jmonkeyengine</a></p></div></div></div>
<div class="sect1"><h2 id="optimizing-models-for-3d-games">Optimizing Models for 3D games</h2><div class="sectionbody"><div class="paragraph"><p>Follow the link below to a pdf tutorial by rhymez where I guide you on how you can optimize your models for faster rendering.
<a href="http://www.indiedb.com/games/street-rally-3d/downloads/optimizing-3d-models-for-games">http://www.indiedb.com/games/street-rally-3d/downloads/optimizing-3d-models-for-games</a></p></div></div></div>
<div class="sect1"><h2 id="skybox-baking">SkyBox baking</h2><div class="sectionbody"><div class="paragraph"><p>There are several ways to create static images to use for a sky in your game. This will describe the concepts used in blender and create an ugly sky <i class="twa twa-smiley"></i>. Check the links below for other ways and prettier skies.</p></div>
<div class="paragraph"><p>A sky box is a texture mapped cube, it can also, loosely, be called en EnvMap or a CubeMap. The camera is inside the cube and the clever thing that jME does is to draw the sky so it is always behind whatever else is in your scene. Imagine the monkey is the camera in the picture.</p></div>
<div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/external/skybox-concept.png" alt="skybox-concept.png" width="" height=""></span></p></li></ul></div>
<div class="paragraph"><p>But a real sky is not a box around our heads, it is more like a sphere. So if we put any old image in the sky it will look strange and might even look like a box. This is not what we want. The trick is to distort the image so that it will <em>look</em> like a sphere even if it in fact is a picture pasted on a box. Luckily blender can do that tricky distortion for us.</p></div>
<div class="paragraph"><p>The screenshots are from Blender 2.63 but the equivalent operations have been in blender for years so with minor tweaks should work for almost any version.</p></div>
<div class="paragraph"><p>So let&#8217;s get started</p></div>
<div class="ulist"><ul><li><p>Fire up blender and you&#8217;ll see something like this.</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/external/start-screen2.png" alt="start-screen2.png" width="" height=""></span></p></li></ul></div></li><li><p>The cube in the start scene is perfect for us. What we&#8217;ll do is have Blender render the scene onto that cube. The resulting image is what we&#8217;ll use for our sky box. So our jME sky will look like we stood inside the blender box and looked out on the scene in blender.</p></li><li><p>Start by selecting the box and set its material to shadeless.</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/external/shadeless.png" alt="shadeless.png" width="" height=""></span></p></li></ul></div></li><li><p>Now we will create a texture for the box. Make sure the texture is an <code>Environment Map</code>, that the <code>Viewpoint Object</code> is set to the cube. The resolution is how large the resulting image will be. More pixels makes the sky look better but comes at the cost of texture memory. You&#8217;ll have to trim the resolution to what works in your application.</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/external/texture.png" alt="texture.png" width="" height=""></span></p></li></ul></div></li><li><p>Next up is the fun part, create the sky scene in blender. You can do whatever fits your application, include models for a city landscape, set up a texture mapped sphere in blender with a nice photographed sky, whatever you can think will make a good sky. I am not so creative so I created this scene:</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/external/scene.png" alt="scene.png" width="" height=""></span></p></li></ul></div></li><li><p>Now render the scene (press F12). It doesn&#8217;t actually matter where the camera is in blender but you might see something similar to this:</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/external/render.png" alt="render.png" width="" height=""></span></p></li></ul></div></li><li><p>You can see that Blender has actually drawn the scene onto the cube. This is exactly what we want. Now to save the image.</p></li><li><p>Select the texture of the cube and select save environment map.</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/external/saveenvmap.png" alt="saveenvmap.png" width="" height=""></span></p></li></ul></div></li><li><p>That is it for Blender. Open the saved image in some image editor (I use the Gimp from <a href="http://www.gimp.org">http://www.gimp.org</a> here).</p></li></ul></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="paragraph"><p>The SDK also contains an image editor, right-click the image and select &#8220;edit&#8221; image to open it.</p></div></td></tr></table></div>
<div class="ulist"><ul><li><p>You will notice that Blender has taken the 6 sides of the cube and pasted together into one image (3x2). So now we need to cut it up again into 6 separate images. In gimp I usually set the guides to where I want to cut and then go into Filters→Web→Slice and let gimp cut it up for me.</p><div class="ulist"><ul><li><p><span class="image"><img src="../../jme3/external/post-slice.png" alt="post-slice.png" width="" height=""></span></p></li></ul></div></li><li><p>Next up is to move the image files into your assets directory and create the sky in jME. You can do that in the Scene Composer by right clicking the scene node, select <code>Add Spatial</code> and then select <code>Skybox</code>.</p></li></ul></div>
<div class="paragraph"><p>If you want to do it from code, here is an example:</p></div>
<div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> simpleInitApp() {

    Texture westTex = assetManager.loadTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Textures/west.png</span><span class="delimiter">&quot;</span></span>);
    Texture eastTex = assetManager.loadTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Textures/east.png</span><span class="delimiter">&quot;</span></span>);
    Texture northTex = assetManager.loadTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Textures/north.png</span><span class="delimiter">&quot;</span></span>);
    Texture southTex = assetManager.loadTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Textures/south.png</span><span class="delimiter">&quot;</span></span>);
    Texture upTex = assetManager.loadTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Textures/top.png</span><span class="delimiter">&quot;</span></span>);
    Texture downTex = assetManager.loadTexture(<span class="string"><span class="delimiter">&quot;</span><span class="content">Textures/bottom.png</span><span class="delimiter">&quot;</span></span>);

    <span class="directive">final</span> Vector3f normalScale = <span class="keyword">new</span> Vector3f(-<span class="integer">1</span>, <span class="integer">1</span>, <span class="integer">1</span>);
    Spatial skySpatial = SkyFactory.createSky(
                        assetManager,
                        westTex,
                        eastTex,
                        northTex,
                        southTex,
                        upTex,
                        downTex,
                        normalScale);
    rootNode.attachChild(skySpatial);
}</code></pre></div></div>
<div class="admonitionblock tip"><table><tr><td class="icon"><i class="fa icon-tip" title="Tip"></i></td><td class="content"><div class="paragraph"><p>This example uses a strange normalScale, this is to flip the image on the X-axis and might not be needed in your case. Hint: the texture is applied on the outside of the cube but we are inside so what do we see?</p></div></td></tr></table></div></div></div>
<div class="sect1"><h2 id="further-reading">Further reading</h2><div class="sectionbody"><div class="ulist"><ul><li><p><a href="../../jme3/advanced/sky.html">How to add a Sky to your Scene</a></p></li><li><p><a href="http://hub.jmonkeyengine.org/t/jmonkeyengine-tutorial-how-to-create-skymaps-using-blender/19313">http://hub.jmonkeyengine.org/t/jmonkeyengine-tutorial-how-to-create-skymaps-using-blender/19313</a></p></li></ul></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2020-05-23 18:26:27 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>