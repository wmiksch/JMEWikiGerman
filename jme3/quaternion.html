<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Asciidoctor 1.5.4"><title>Quaternion</title><link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<link rel="stylesheet" href="./coderay-asciidoctor.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"><link rel="stylesheet" href="/home/travis/build/wmiksch/JMEWikiGerman/build/asciidoc/html5/jme3/twemoji-awesome.css"></head><body class="article toc2 toc-left"><div id="header"><div id="toolbar"><a href="https://github.com/wmiksch/JMEWikiGerman/edit/master/src/docs/asciidoc/jme3/quaternion.adoc"><i class="fa fa-pencil-square" aria-hidden="true"></i></a><a href="https://github.com/wmiksch/JMEWikiGerman/new/master/src/docs/asciidoc/jme3/"><i class="fa fa-plus-square" aria-hidden="true"></i></a><input dir="auto" style="position: relative; vertical-align: top;" spellcheck="false" autocomplete="off" class="searchbox__input aa-input" id="doc-search" name="search" placeholder="Search in the doc" required="required" type="search"></div><h1>Quaternion</h1><div class="details"><span class="author" id="author"></span><br><span id="revnumber">version ,</span> <span id="revdate">2016/03/17 20:48</span></div><div id="toc" class="toc2"><div id="toctitle">Inhaltsverzeichnis</div><ul class="sectlevel1"><li><a href="#quaternion">Quaternion</a><ul class="sectlevel2"><li><a href="#definition">Definition</a></li><li><a href="#angle-axis">Angle Axis</a></li><li><a href="#three-angles">Three Angles</a></li><li><a href="#three-axes">Three Axes</a></li><li><a href="#rotation-matrix">Rotation Matrix</a></li><li><a href="#slerp">Slerp</a></li></ul></li></ul></div></div><div id="content"><div class="sect2"><h3 id="quaternion">Quaternion</h3><div class="paragraph"><p>See <a href="https://javadoc.jmonkeyengine.org/v3.3.2-stable/com/jme3/math/Quaternion.html">Javadoc</a></p></div>
<div class="sect2"><h3 id="definition">Definition</h3><div class="paragraph"><p>Quaternions define a subset of a hypercomplex number system. Quaternions are defined by (i<sup>2</sup> = j<sup>2</sup> = k<sup>2</sup> = ijk = -1). jME makes use of Quaternions because they allow for compact representations of rotations, or correspondingly, orientations, in 3D space. With only four float values, we can represent an object&#8217;s orientation, where a rotation matrix would require nine. They also require fewer arithmetic operations for concatenation.</p></div>
<div class="paragraph"><p>Additional benefits of the Quaternion is reducing the chance of <a href="http://en.wikipedia.org/wiki/Gimbal_lock">Gimbal Lock</a> and allowing for easily interpolation between two rotations (spherical linear interpolation or slerp).</p></div>
<div class="paragraph"><p>While Quaternions are quite difficult to fully understand, there are an exceeding number of convenience methods to allow you to use them without having to understand the math behind it. Basically, these methods involve nothing more than setting the Quaternion&#8217;s x,y,z,w values using other means of representing rotations. The Quaternion is then contained in <a href="../jme3/advanced/spatial.html">Spatial</a> as its local rotation component.</p></div>
<div class="paragraph"><p>Quaternion <strong>q</strong> has the form</p></div>
<div class="paragraph"><p><strong>q</strong> = &lt;_w,x,y,z_&gt; = <em>w + xi + yj + zk</em></p></div>
<div class="paragraph"><p>or alternatively, it can be written as:</p></div>
<div class="paragraph"><p><strong>q</strong> = <strong>s</strong> + <strong>v</strong>, where <strong>s</strong> represents the scalar part corresponding to the w-component of <strong>q</strong>, and <strong>v</strong> represents the vector part of the (x, y, z) components of <strong>q</strong>.</p></div>
<div class="paragraph"><p>Multiplication of Quaternions uses the distributive law and adheres to the following rules with multiplying the imaginary components (i, j, k):</p></div>
<div class="paragraph"><p><code>i<sup>2</sup> = j<sup>2</sup> = k<sup>2</sup> = -1</code>+
<code>ij = -ji = k</code>+
<code>jk = -kj = i</code>+
<code>ki = -ik = j</code></p></div>
<div class="paragraph"><p>However, Quaternion multiplication is <em>not</em> commutative, so we have to pay attention to order.</p></div>
<div class="paragraph"><p><strong>q<sub>1</sub>q<sub>2</sub></strong> = s<sub>1</sub>s<sub>2</sub> - <strong>v<sub>1</sub></strong> dot <strong>v<sub>2</sub></strong> + s<sub>1</sub><strong>v<sub>2</sub></strong> + s<sub>2</sub><strong>v<sub>1</sub></strong> + <strong>v<sub>1</sub></strong> X <strong>v<sub>2</sub></strong></p></div>
<div class="paragraph"><p>Quaternions also have conjugates where the conjugate of <strong>q</strong> is (s - <strong>v</strong>)</p></div>
<div class="paragraph"><p>These basic operations allow us to convert various rotation representations to Quaternions.</p></div></div>
<div class="sect2"><h3 id="angle-axis">Angle Axis</h3><div class="paragraph"><p>You might wish to represent your rotations as Angle Axis pairs. That is, you define a axis of rotation and the angle with which to rotate about this axis. Quaternion defines a method <code>fromAngleAxis</code> (and <code>fromAngleNormalAxis</code>) to create a Quaternion from this pair. This is acutally used quite a bit in jME demos to continually rotate objects. You can also obtain a Angle Axis rotation from an existing Quaternion using <code>toAngleAxis</code>.</p></div>
<div class="sect3"><h4 id="example-rotate-a-spatial-using-fromangleaxis">Example - Rotate a Spatial Using fromAngleAxis</h4><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//rotate about the Y-Axis by approximately 1 pi</span>
Vector3f axis = Vector3f.UNIT_Y; <span class="comment">// this equals (0, 1, 0) and does not require to create a new object</span>
<span class="type">float</span> angle = <span class="float">3.14f</span>;
s.getLocalRotation().fromAngleAxis(angle, axis);</code></pre></div></div></div></div>
<div class="sect2"><h3 id="three-angles">Three Angles</h3><div class="paragraph"><p>You can also represent a rotation by defining three angles. The angles represent the rotation about the individual axes. Passing in a three-element array of floats defines the angles where the first element is X, second Y and third is Z. The method provided by Quaternion is <code>fromAngles</code> and can also fill an array using <code>toAngles</code></p></div>
<div class="sect3"><h4 id="example-rotate-a-spatial-using-fromangles">Example - Rotate a Spatial Using fromAngles</h4><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//rotate 1 radian on the x, 3 on the y and 0 on z</span>
<span class="type">float</span><span class="type">[]</span> angles = {<span class="integer">1</span>, <span class="integer">3</span>, <span class="integer">0</span>};
s.getLocalRotation().fromAngles(angles);</code></pre></div></div></div></div>
<div class="sect2"><h3 id="three-axes">Three Axes</h3><div class="paragraph"><p>If you have three axes that define your rotation, where the axes define the left axis, up axis and directional axis respectively) you can make use of <code>fromAxes</code> to generate the Quaternion. It should be noted that this will generate a new <a href="../jme3/matrix.html">Matrix</a> object that is then garbage collected, thus, this method should not be used if it will be called many times. Again, <code>toAxes</code> will populate a <a href="../jme3/terminology.html#vectors">Vector3f</a> array.</p></div>
<div class="sect3"><h4 id="example-rotate-a-spatial-using-fromaxes">Example - Rotate a Spatial Using fromAxes</h4><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java"><span class="comment">//rotate a spatial to face up ~45 degrees</span>
Vector3f<span class="type">[]</span> axes = <span class="keyword">new</span> Vector3f[<span class="integer">3</span>];
axes[<span class="integer">0</span>] = <span class="keyword">new</span> Vector3f(-<span class="integer">1</span>, <span class="integer">0</span>, <span class="integer">0</span>); <span class="comment">//left</span>
axes[<span class="integer">1</span>] = <span class="keyword">new</span> Vector3f(<span class="integer">0</span>, <span class="float">0.5f</span>, <span class="float">0.5f</span>); <span class="comment">//up</span>
axes[<span class="integer">2</span>] = <span class="keyword">new</span> Vector3f(<span class="integer">0</span>, <span class="float">0.5f</span>, <span class="float">0.5f</span>); <span class="comment">//dir</span>

s.getLocalRotation().fromAxes(axes);</code></pre></div></div></div></div>
<div class="sect2"><h3 id="rotation-matrix">Rotation Matrix</h3><div class="paragraph"><p>Commonly you might find yourself with a <a href="../jme3/matrix.html">Matrix</a> defining a <a href="../jme3/rotate.html#toolbar">rotation</a>. In fact, it&#8217;s very common to contain a rotation in a Matrix, create a Quaternion, rotate the Quaternion, and then get the Matrix back. Quaternion contains a <code>fromRotationMatrix</code> method that will create the appropriate Quaternion based on the given Matrix. The <code>toRotationMatrix</code> will populate a given Matrix.</p></div>
<div class="sect3"><h4 id="example-rotate-a-spatial-using-a-rotation-matrix">Example - Rotate a Spatial Using a Rotation Matrix</h4><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Matrix3f mat = <span class="keyword">new</span> Matrix3f();
mat.setColumn(<span class="integer">0</span>, <span class="keyword">new</span> Vector3f(<span class="integer">1</span>,<span class="integer">0</span>,<span class="integer">0</span>));
mat.setColumn(<span class="integer">1</span>, <span class="keyword">new</span> Vector3f(<span class="integer">0</span>,-<span class="integer">1</span>,<span class="integer">0</span>));
mat.setColumn(<span class="integer">2</span>, <span class="keyword">new</span> Vector3f(<span class="integer">0</span>,<span class="integer">0</span>,<span class="integer">1</span>));

s.getLocalRotation().fromRotationMatrix(mat);</code></pre></div></div>
<div class="paragraph"><p>As you can see there are many ways to build a Quaternion. This allows you to work with rotations in a way that is conceptually easier to picture, but still build Quaternions for internal representation.</p></div></div></div>
<div class="sect2"><h3 id="slerp">Slerp</h3><div class="paragraph"><p>One of the biggest advantages to using Quaternions is allowing interpolation between two rotations. That is, if you have an initial Quaternion representing the original orientation of an object, and you have a final Quaternion representing the orientation you want the object to face, you can do this very smoothly with slerp. Simply supply the time, where time is [0, 1] and 0 is the initial rotation and 1 is the final rotation.</p></div>
<div class="sect3"><h4 id="example-use-slerp-to-rotate-between-two-quaternions">Example - Use Slerp to Rotate Between two Quaternions</h4><div class="listingblock"><div class="content"><pre class="CodeRay highlight"><code data-lang="java">Quaternion q1;
Quaternion q2;

<span class="comment">//the rotation half-way between these two</span>
Quaternion q3 = q1.slerp(q2, <span class="float">0.5f</span>);</code></pre></div></div>
<hr>
<div class="ulist"><ul><li><p>See <a href="../jme3/rotate.html">3D-Rotations</a> for troubleshooting and extra information on using quaternions.</p></li></ul></div></div></div></div></div><div id="footer"><div id="footer-text">Version <br>Last updated 2020-05-22 17:19:21 +00:00</div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script>docsearch({
  apiKey: 'a736b6d93de805e26ec2f49b55013fbd',
  indexName: 'jmonkeyengine',
  inputSelector: '#doc-search',
  debug: false // Set debug to true if you want to inspect the dropdown
});</script></body></html>